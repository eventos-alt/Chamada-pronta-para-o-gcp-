// ðŸš¨ TESTE CORS - Sistema IOS
// Script para testar comunicaÃ§Ã£o frontend-backend

console.log("ðŸ” Testando comunicaÃ§Ã£o com backend...");

const API = "https://sistema-ios-backend.onrender.com/api";

// FunÃ§Ã£o de teste ping
async function testPing() {
  console.log("ðŸ”” Testando endpoint /ping...");
  try {
    const response = await fetch(`${API}/ping`);
    const data = await response.json();
    console.log("âœ… Ping response:", data);
    return true;
  } catch (error) {
    console.error("âŒ Ping failed:", error);
    return false;
  }
}

// FunÃ§Ã£o de teste units
async function testUnits() {
  console.log("ðŸ¢ Testando endpoint /units...");
  try {
    const response = await fetch(`${API}/units`);
    if (!response.ok) {
      throw new Error(`HTTP ${response.status}: ${response.statusText}`);
    }
    const data = await response.json();
    console.log("âœ… Units response:", data);
    return true;
  } catch (error) {
    console.error("âŒ Units failed:", error);
    return false;
  }
}

// Executar testes
async function runTests() {
  console.log("ðŸš€ Iniciando testes...");
  
  const pingOk = await testPing();
  if (pingOk) {
    console.log("â³ Aguardando 2 segundos para backend acordar...");
    await new Promise(resolve => setTimeout(resolve, 2000));
    
    const unitsOk = await testUnits();
    if (unitsOk) {
      console.log("ðŸŽ‰ TODOS OS TESTES PASSARAM!");
    }
  }
}

// Executar quando a pÃ¡gina carregar
runTests();